
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Request · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="response.html" />
    
    
    <link rel="prev" href="context.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../job.html">
            
                <a href="../job.html">
            
                    
                    職務需求
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    第一週
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../env.html">
            
                <a href="../env.html">
            
                    
                    環境安裝
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Node.JS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../node/">
            
                <a href="../node/">
            
                    
                    Node.JS 介紹
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../node/core.html">
            
                <a href="../node/core.html">
            
                    
                    常見核心模組
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../node/exec.html">
            
                <a href="../node/exec.html">
            
                    
                    執行 JS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../node/global.html">
            
                <a href="../node/global.html">
            
                    
                    Global Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="../node/module.html">
            
                <a href="../node/module.html">
            
                    
                    自訂模組
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    ES6
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    套件管理工具
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../npm/">
            
                <a href="../npm/">
            
                    
                    NPM 介紹
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../npm/init.html">
            
                <a href="../npm/init.html">
            
                    
                    初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../npm/script.html">
            
                <a href="../npm/script.html">
            
                    
                    Script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../npm/dependencies.html">
            
                <a href="../npm/dependencies.html">
            
                    
                    套件管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="../npm/version.html">
            
                <a href="../npm/version.html">
            
                    
                    版本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.6" data-path="../common-module.html">
            
                <a href="../common-module.html">
            
                    
                    常用套件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Web 框架 (上)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../http.html">
            
                <a href="../http.html">
            
                    
                    HTTP 的基礎知識
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="./">
            
                <a href="./">
            
                    
                    介紹 Koa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="application.html">
            
                <a href="application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.4" data-path="context.html">
            
                <a href="context.html">
            
                    
                    Context
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.5.5" data-path="request.html">
            
                <a href="request.html">
            
                    
                    Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.6" data-path="response.html">
            
                <a href="response.html">
            
                    
                    Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.7" data-path="../vs.md">
            
                <span>
            
                    
                    Koa VS Express
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../practice1.html">
            
                <a href="../practice1.html">
            
                    
                    練習題
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    第二週
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <span>
            
                    
                    Web 框架 (下)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="middleware.html">
            
                <a href="middleware.html">
            
                    
                    中間層
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="router.html">
            
                <a href="router.html">
            
                    
                    路由
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../restful.html">
            
                <a href="../restful.html">
            
                    
                    RESTFul
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="jwt.html">
            
                <a href="jwt.html">
            
                    
                    JWT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.5" data-path="static.html">
            
                <a href="static.html">
            
                    
                    靜態頁面
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../testing/">
            
                <a href="../testing/">
            
                    
                    測試開發
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../testing/jest.html">
            
                <a href="../testing/jest.html">
            
                    
                    Jest
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../practice2.html">
            
                <a href="../practice2.html">
            
                    
                    練習題
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    第三週
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../db/">
            
                <a href="../db/">
            
                    
                    整合資料庫
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../db/sequelize.html">
            
                <a href="../db/sequelize.html">
            
                    
                    Sequelize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../db/sequelize/init.html">
            
                <a href="../db/sequelize/init.html">
            
                    
                    安裝與初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="../db/sequelize/config.html">
            
                <a href="../db/sequelize/config.html">
            
                    
                    設定檔
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.4" data-path="../db/sequelize/model.html">
            
                <a href="../db/sequelize/model.html">
            
                    
                    model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.5" data-path="../db/sequelize/migrations.html">
            
                <a href="../db/sequelize/migrations.html">
            
                    
                    變動
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                    整合前端
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../view/rendering.html">
            
                <a href="../view/rendering.html">
            
                    
                    Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../view/templates.html">
            
                <a href="../view/templates.html">
            
                    
                    樣板系統
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../view/handlebars.html">
            
                <a href="../view/handlebars.html">
            
                    
                    handlebars.js 語法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../practice3.html">
            
                <a href="../practice3.html">
            
                    
                    練習題
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../resource.html">
            
                <a href="../resource.html">
            
                    
                    自學學習資源
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Request</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="request">Request</h1>
<p><img src="https://www.w3schools.in/wp-content/uploads/2019/08/http-protocol.jpg" alt=""></p>
<p>&#x5716;&#x7247;&#x4F86;&#x6E90;&#xFF1A;w3schools</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;API &#x6709;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x771F;&#x6B63;&#x5E38;&#x7528;&#x7684;&#x4E0D;&#x591A;&#xFF0C;&#x53EF;&#x4EE5;&#x66AB;&#x6642;&#x53EA;&#x770B;&#x6709;&#x6A19;&#x6CE8; &#x2757; &#x7684;&#x90E8;&#x5206;&#x3002;</p>
</blockquote>
<h2 id="&#x5E38;&#x898B;&#x4E09;&#x7A2E;&#x53C3;&#x6578;-parameter">&#x5E38;&#x898B;&#x4E09;&#x7A2E;&#x53C3;&#x6578; (parameter)</h2>
<ul>
<li>path &#x53C3;&#x6578; / url &#x53C3;&#x6578;</li>
<li>query &#x53C3;&#x6578;</li>
<li>body &#x53C3;&#x6578;</li>
</ul>
<h2 id="api">API</h2>
<p><strong>&#x2757;request.header</strong></p>
<p>Request header object.</p>
<p><strong>request.header=</strong></p>
<p>Set request header object.</p>
<p><strong>request.headers</strong></p>
<p>Request header object. Alias as request.header.</p>
<p><strong>request.headers=</strong></p>
<p>Set request header object. Alias as request.header=.</p>
<p><strong>request.method</strong></p>
<p>Request method.</p>
<p><strong>request.method=</strong></p>
<p>Set request method, useful for implementing middleware such as methodOverride().</p>
<p><strong>request.length</strong></p>
<p>Return request Content-Length as a number when present, or undefined.</p>
<p><strong>request.url</strong></p>
<p>Get request URL.</p>
<p><strong>request.url=</strong></p>
<p>Set request URL, useful for url rewrites.</p>
<p><strong>request.originalUrl</strong></p>
<p>Get request original URL.</p>
<p><strong>request.origin</strong></p>
<p>Get origin of URL, include protocol and host.</p>
<pre><code class="lang-js">ctx.request.origin
<span class="hljs-comment">// =&gt; http://example.com</span>
</code></pre>
<p><strong>request.href</strong></p>
<p>Get full request URL, include protocol, host and url.</p>
<pre><code class="lang-js">ctx.request.href
<span class="hljs-comment">// =&gt; http://example.com/foo/bar?q=1</span>
</code></pre>
<p><strong>request.path</strong></p>
<p>Get request pathname.</p>
<p><strong>request.path=</strong></p>
<p>Set request pathname and retain query-string when present.</p>
<p><strong>request.querystring</strong></p>
<p>Get raw query string void of ?.</p>
<p><strong>request.querystring=</strong></p>
<p>Set raw query string.</p>
<p><strong>request.search</strong></p>
<p>Get raw query string with the ?.</p>
<p><strong>request.search=</strong></p>
<p>Set raw query string.</p>
<p><strong>request.host</strong></p>
<p>Get host (hostname:port) when present. Supports X-Forwarded-Host when app.proxy is true, otherwise Host is used.</p>
<p><strong>request.hostname</strong></p>
<p>Get hostname when present. Supports X-Forwarded-Host when app.proxy is true, otherwise Host is used.</p>
<p>If host is IPv6, Koa delegates parsing to WHATWG URL API, Note This may impact performance.</p>
<p><strong>request.URL</strong></p>
<p>Get WHATWG parsed URL object.</p>
<p><strong>&#x2757;request.type</strong></p>
<p>Get request Content-Type void of parameters such as &quot;charset&quot;.</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> ct = ctx.request.type
<span class="hljs-comment">// =&gt; &quot;image/png&quot;</span>
</code></pre>
<p><strong>request.charset</strong></p>
<p>Get request charset when present, or undefined:</p>
<pre><code>ctx.request.charset;
// =&gt; &quot;utf-8&quot;
</code></pre><p><strong>&#x2757;request.query</strong></p>
<p>Get parsed query-string, returning an empty object when no query-string is present. Note that this getter does not support nested parsing.</p>
<p>For example &quot;color=blue&amp;size=small&quot;:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;color&quot;</span>: <span class="hljs-string">&quot;blue&quot;</span>,
  <span class="hljs-string">&quot;size&quot;</span>: <span class="hljs-string">&quot;small&quot;</span>
}
</code></pre>
<p><strong>request.query=</strong></p>
<p>Set query-string to the given object. Note that this setter does not support nested objects.</p>
<pre><code class="lang-js">ctx.query = { next: <span class="hljs-string">&apos;/login&apos;</span> }
</code></pre>
<p><strong>request.fresh</strong></p>
<p>Check if a request cache is &quot;fresh&quot;, aka the contents have not changed. This method is for cache negotiation between If-None-Match / ETag, and If-Modified-Since and Last-Modified. It should be referenced after setting one or more of these response headers.</p>
<pre><code class="lang-js"><span class="hljs-comment">// freshness check requires status 20x or 304</span>
ctx.status = <span class="hljs-number">200</span>
ctx.set(<span class="hljs-string">&apos;ETag&apos;</span>, <span class="hljs-string">&apos;123&apos;</span>)

<span class="hljs-comment">// cache is ok</span>
<span class="hljs-keyword">if</span> (ctx.fresh) {
  ctx.status = <span class="hljs-number">304</span>
  <span class="hljs-keyword">return</span>
}

<span class="hljs-comment">// cache is stale</span>
<span class="hljs-comment">// fetch new data</span>
ctx.body = <span class="hljs-keyword">await</span> db.find(<span class="hljs-string">&apos;something&apos;</span>)
</code></pre>
<p><strong>request.stale</strong></p>
<p>Inverse of request.fresh.</p>
<p><strong>request.protocol</strong></p>
<p>Return request protocol, &quot;https&quot; or &quot;http&quot;. Supports X-Forwarded-Proto when app.proxy is true.</p>
<p><strong>request.secure</strong></p>
<p>Shorthand for ctx.protocol == &quot;https&quot; to check if a request was issued via TLS.</p>
<p><strong>request.ip</strong></p>
<p>Request remote address. Supports X-Forwarded-For when app.proxy is true.</p>
<p><strong>request.ips</strong></p>
<p>When X-Forwarded-For is present and app.proxy is enabled an array of these ips is returned, ordered from upstream -&gt; downstream. When disabled an empty array is returned.</p>
<p><strong>request.subdomains</strong></p>
<p>Return subdomains as an array.</p>
<p>Subdomains are the dot-separated parts of the host before the main domain of the app. By default, the domain of the app is assumed to be the last two parts of the host. This can be changed by setting app.subdomainOffset.</p>
<p>For example, if the domain is &quot;tobi.ferrets.example.com&quot;: If app.subdomainOffset is not set, ctx.subdomains is [&quot;ferrets&quot;, &quot;tobi&quot;]. If app.subdomainOffset is 3, ctx.subdomains is [&quot;tobi&quot;].</p>
<p><strong>request.is(types...)</strong></p>
<p>Check if the incoming request contains the &quot;Content-Type&quot; header field, and it contains any of the give mime types. If there is no request body, null is returned. If there is no content type, or the match fails false is returned. Otherwise, it returns the matching content-type.</p>
<pre><code class="lang-js"><span class="hljs-comment">// With Content-Type: text/html; charset=utf-8</span>
ctx.is(<span class="hljs-string">&apos;html&apos;</span>) <span class="hljs-comment">// =&gt; &apos;html&apos;</span>
ctx.is(<span class="hljs-string">&apos;text/html&apos;</span>) <span class="hljs-comment">// =&gt; &apos;text/html&apos;</span>
ctx.is(<span class="hljs-string">&apos;text/*&apos;</span>, <span class="hljs-string">&apos;text/html&apos;</span>) <span class="hljs-comment">// =&gt; &apos;text/html&apos;</span>

<span class="hljs-comment">// When Content-Type is application/json</span>
ctx.is(<span class="hljs-string">&apos;json&apos;</span>, <span class="hljs-string">&apos;urlencoded&apos;</span>) <span class="hljs-comment">// =&gt; &apos;json&apos;</span>
ctx.is(<span class="hljs-string">&apos;application/json&apos;</span>) <span class="hljs-comment">// =&gt; &apos;application/json&apos;</span>
ctx.is(<span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-string">&apos;application/*&apos;</span>) <span class="hljs-comment">// =&gt; &apos;application/json&apos;</span>

ctx.is(<span class="hljs-string">&apos;html&apos;</span>) <span class="hljs-comment">// =&gt; false</span>
</code></pre>
<p>For example if you want to ensure that only images are sent to a given route:</p>
<pre><code class="lang-js"><span class="hljs-keyword">if</span> (ctx.is(<span class="hljs-string">&apos;image/*&apos;</span>)) {
  <span class="hljs-comment">// process</span>
} <span class="hljs-keyword">else</span> {
  ctx.throw(<span class="hljs-number">415</span>, <span class="hljs-string">&apos;images only!&apos;</span>)
}
</code></pre>
<h3 id="content-negotiation">Content Negotiation</h3>
<p>Koa&apos;s request object includes helpful content negotiation utilities powered by accepts and negotiator. These utilities are:</p>
<ul>
<li>request.accepts(types)</li>
<li>request.acceptsEncodings(types)</li>
<li>request.acceptsCharsets(charsets)</li>
<li>request.acceptsLanguages(langs)</li>
</ul>
<p>If no types are supplied, all acceptable types are returned.</p>
<p>If multiple types are supplied, the best match will be returned. If no matches are found, a false is returned, and you should send a 406 &quot;Not Acceptable&quot; response to the client.</p>
<p>In the case of missing accept headers where any type is acceptable, the first type will be returned. Thus, the order of types you supply is important.</p>
<p><strong>request.accepts(types)</strong></p>
<p>Check if the given type(s) is acceptable, returning the best match when true, otherwise false. The type value may be one or more mime type string such as &quot;application/json&quot;, the extension name such as &quot;json&quot;, or an array [&quot;json&quot;, &quot;html&quot;, &quot;text/plain&quot;].</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept: text/html</span>
ctx.accepts(<span class="hljs-string">&apos;html&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;html&quot;</span>

<span class="hljs-comment">// Accept: text/\*, application/json</span>
ctx.accepts(<span class="hljs-string">&apos;html&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;html&quot;</span>
ctx.accepts(<span class="hljs-string">&apos;text/html&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;text/html&quot;</span>
ctx.accepts(<span class="hljs-string">&apos;json&apos;</span>, <span class="hljs-string">&apos;text&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;json&quot;</span>
ctx.accepts(<span class="hljs-string">&apos;application/json&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;application/json&quot;</span>

<span class="hljs-comment">// Accept: text/\*, application/json</span>
ctx.accepts(<span class="hljs-string">&apos;image/png&apos;</span>)
ctx.accepts(<span class="hljs-string">&apos;png&apos;</span>)
<span class="hljs-comment">// =&gt; false</span>

<span class="hljs-comment">// Accept: text/\*;q=.5, application/json</span>
ctx.accepts([<span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-string">&apos;json&apos;</span>])
ctx.accepts(<span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-string">&apos;json&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;json&quot;</span>

<span class="hljs-comment">// No Accept header</span>
ctx.accepts(<span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-string">&apos;json&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;html&quot;</span>
ctx.accepts(<span class="hljs-string">&apos;json&apos;</span>, <span class="hljs-string">&apos;html&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;json&quot;</span>
</code></pre>
<p>You may call ctx.accepts() as many times as you like, or use a switch:</p>
<pre><code class="lang-js"><span class="hljs-keyword">switch</span> (ctx.accepts(<span class="hljs-string">&apos;json&apos;</span>, <span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-string">&apos;text&apos;</span>)) {
  <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;json&apos;</span>:
    <span class="hljs-keyword">break</span>
  <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;html&apos;</span>:
    <span class="hljs-keyword">break</span>
  <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;text&apos;</span>:
    <span class="hljs-keyword">break</span>
  <span class="hljs-keyword">default</span>:
    ctx.throw(<span class="hljs-number">406</span>, <span class="hljs-string">&apos;json, html, or text only&apos;</span>)
}
</code></pre>
<p><strong>request.acceptsEncodings(encodings)</strong></p>
<p>Check if encodings are acceptable, returning the best match when true, otherwise false. Note that you should include identity as one of the encodings!</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept-Encoding: gzip</span>
ctx.acceptsEncodings(<span class="hljs-string">&apos;gzip&apos;</span>, <span class="hljs-string">&apos;deflate&apos;</span>, <span class="hljs-string">&apos;identity&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;gzip&quot;</span>

ctx.acceptsEncodings([<span class="hljs-string">&apos;gzip&apos;</span>, <span class="hljs-string">&apos;deflate&apos;</span>, <span class="hljs-string">&apos;identity&apos;</span>])
<span class="hljs-comment">// =&gt; &quot;gzip&quot;</span>
</code></pre>
<p>When no arguments are given all accepted encodings are returned as an array:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept-Encoding: gzip, deflate</span>
ctx.acceptsEncodings()
<span class="hljs-comment">// =&gt; [&quot;gzip&quot;, &quot;deflate&quot;, &quot;identity&quot;]</span>
</code></pre>
<p>Note that the identity encoding (which means no encoding) could be unacceptable if the client explicitly sends identity;q=0. Although this is an edge case, you should still handle the case where this method returns false.</p>
<p><strong>request.acceptsCharsets(charsets)</strong></p>
<p>Check if charsets are acceptable, returning the best match when true, otherwise false.</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept-Charset: utf-8, iso-8859-1;q=0.2, utf-7;q=0.5</span>
ctx.acceptsCharsets(<span class="hljs-string">&apos;utf-8&apos;</span>, <span class="hljs-string">&apos;utf-7&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;utf-8&quot;</span>

ctx.acceptsCharsets([<span class="hljs-string">&apos;utf-7&apos;</span>, <span class="hljs-string">&apos;utf-8&apos;</span>])
<span class="hljs-comment">// =&gt; &quot;utf-8&quot;</span>
</code></pre>
<p>When no arguments are given all accepted charsets are returned as an array:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept-Charset: utf-8, iso-8859-1;q=0.2, utf-7;q=0.5</span>
ctx.acceptsCharsets()
<span class="hljs-comment">// =&gt; [&quot;utf-8&quot;, &quot;utf-7&quot;, &quot;iso-8859-1&quot;]</span>
</code></pre>
<p><strong>request.acceptsLanguages(langs)</strong></p>
<p>Check if langs are acceptable, returning the best match when true, otherwise false.</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept-Language: en;q=0.8, es, pt</span>
ctx.acceptsLanguages(<span class="hljs-string">&apos;es&apos;</span>, <span class="hljs-string">&apos;en&apos;</span>)
<span class="hljs-comment">// =&gt; &quot;es&quot;</span>

ctx.acceptsLanguages([<span class="hljs-string">&apos;en&apos;</span>, <span class="hljs-string">&apos;es&apos;</span>])
<span class="hljs-comment">// =&gt; &quot;es&quot;</span>
</code></pre>
<p>When no arguments are given all accepted languages are returned as an array:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Accept-Language: en;q=0.8, es, pt</span>
ctx.acceptsLanguages()
<span class="hljs-comment">// =&gt; [&quot;es&quot;, &quot;pt&quot;, &quot;en&quot;]</span>
</code></pre>
<p><strong>request.idempotent</strong></p>
<p>Check if the request is idempotent.</p>
<p><strong>request.socket</strong></p>
<p>Return the request socket.</p>
<p><strong>&#x2757;request.get(field)</strong></p>
<p>Return request header.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="context.html" class="navigation navigation-prev " aria-label="Previous page: Context">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="response.html" class="navigation navigation-next " aria-label="Next page: Response">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Request","level":"1.3.5.5","depth":3,"next":{"title":"Response","level":"1.3.5.6","depth":3,"path":"koa/response.md","ref":"koa/response.md","articles":[]},"previous":{"title":"Context","level":"1.3.5.4","depth":3,"path":"koa/context.md","ref":"koa/context.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"koa/request.md","mtime":"2021-02-25T00:04:26.535Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-02-25T00:05:00.613Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

